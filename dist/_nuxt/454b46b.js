(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{570:function(t,e,n){"use strict";n.r(e);n(46),n(32),n(48),n(63),n(64);var o=n(11),r=n(28),c=(n(27),n(23),n(49),n(47),n(82),n(138),n(44),n(212),n(368),n(16)),l=n(550),d=n(22),m=n(551),h=n(567),f=n(623),v=n(565),x=n(563),_=n(609);function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var w=d.a.get("posts"),C={name:"ExternalPost",components:{ArrangePhotos:h.default,HeaderExternalPost:f.default,LikeButton:v.default,InputComment:x.default,CommentDetail:_.default,PostDetail:m.default},middleware:"darkMode",props:{post:{type:Object,default:function(){return{background:"",content:""}}},isGroups:{type:Boolean}},data:function(){return{list:["https://thibanglaixemay360.com/wp-content/uploads/2023/05/a4dd8599ac65f84eebce0091404a6ee4.jpg"],showFiveIconLike:!1,staticIcon:l.b,showSetting:!1,totalLike:0,listImages:[],listVideos:[],checkLike:!1,postCopy:null,threeLike:[],comments:[],showPostDetail:!1,user:null,firstPost:null,userId:null,showRecomment:!1}},watch:{post:{handler:"handleListMedia",deep:!0,immediate:!0},postCopy:{handler:"handleThreeLike",deep:!0},"$store.state.authModule.user":{handler:function(t){this.user=t,this.userId=t.user_id},deep:!0,immediate:!0}},created:function(){var t=this;this.postCopy=this.post.reactions,this.fetchGetComment(),this.firstPost=this.post,console.log(this.post),this.post.reactions.forEach((function(e){t.totalLike=e.user_id.length+t.totalLike})),this.checkLike=this.post.reactions.some((function(e){return e.user_id.some((function(e){return+e==+t.userId}))})),this.handleThreeLike()},methods:{handleListMedia:function(){var t,e=this;this.postCopy=this.post.reactions,null===(t=this.post.media)||void 0===t||t.forEach((function(t){"image"===t.media_type&&e.listImages.push({url:t.url,postId:t.post_id}),"video"===t.media_type&&e.listVideos.push({url:t.url,postId:t.post_id})}))},addLike:function(t){var e=this;c.a.emit("react_post_notification",{postId:this.post.post_id,ownerId:this.userId,ownerAction:t.name}),console.log(t.name),this.checkLike||(this.totalLike+=1,this.checkLike=!0),this.postCopy=this.postCopy.map((function(n){var o=n.user_id.indexOf(e.userId);return o>-1&&n.user_id.splice(o,1),n.type===t.name&&n.user_id.push(e.userId),n}))},Unlike:function(){var t=this;this.totalLike=this.totalLike-1,this.threeLike=this.threeLike.map((function(e){return e.user_id.filter((function(e){return e!==t.userId}))}))},handleThreeLike:function(){var t=this,e=l.b.map((function(e){var n=t.postCopy.find((function(t){return t.type===e.name}));return y(y({},e),n)}));this.threeLike=e.sort((function(a,b){return b.user_id.length-a.user_id.length})).slice(0,3)},addMess:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t.value,t.innerText,n.next=3,w.createComment({commentValue:o,postId:e.post.post_id,userId:e.userId});case 3:r=n.sent,c.a.emit("comment_notification",{commentId:r.data.id,postId:e.post.post_id}),console.log("comment ===> ",r.data),e.fetchGetComment();case 7:case"end":return n.stop()}}),n)})))()},fetchGetComment:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getComment({postId:t.post.post_id});case 2:n=e.sent,t.comments=n.data.allComments;case 4:case"end":return e.stop()}}),e)})))()},handleShowPostDetailt:function(t){this.showPostDetail=t}}},L=n(8),component=Object(L.a)(C,(function(){var t,e,n=this,o=n._self._c;return o("div",{},[n.showPostDetail?o("div",[o("PostDetail",{attrs:{post:n.post},on:{showPostDetailt:n.handleShowPostDetailt}})],1):n._e(),n._v(" "),"Gợi ý"===n.post.title?o("div",{staticClass:"px-4 pt-4 pb-2 text-[15px] text-[#65676B] font-medium"},[n._v("\n  "+n._s(n.$t("home.goiy"))+"\n    "),o("div",{staticClass:"w-full mx-auto border-b border-gray-300 mt-4"})]):n._e(),n._v(" "),o("HeaderExternalPost",{attrs:{post:n.post}}),n._v(" "),null!==(t=n.post)&&void 0!==t&&t.background?o("div",{staticClass:"w-full h-[410px] bg-cover bg-center flex items-center justify-center text-center",style:{backgroundImage:null===(e=n.post)||void 0===e?void 0:e.background}},[o("div",{staticClass:"px-4 pt-1 pb-4 text-white font-semibold text-3xl flex items-center justify-center text-center",domProps:{innerHTML:n._s(n.post.content)}})]):o("div",[o("div",{staticClass:"px-4 pt-1 pb-4 text-base dark:text-[#E4E6EB]",domProps:{innerHTML:n._s(n.post.content)}})]),n._v(" "),o("div",[o("ArrangePhotos",{attrs:{"list-images":n.listImages,"list-videos":n.listVideos,height:"700"}})],1),n._v(" "),o("div",{staticClass:"mx-4 py-3 flex items-center justify-between"},[o("div",{staticClass:"flex gap-4"},[o("div",{staticClass:"flex items-center -gap-1"},n._l(n.threeLike,(function(t,e){return o("div",{key:e,class:{"-ml-[6px]":e>0},style:{zIndex:8-e}},[t.user_id.length>0?o("div",{staticClass:"w-[22px] h-[22px] flex items-center justify-center border-2 border-white rounded-full relative"},[o("img",{staticClass:"w-full h-full object-cover",attrs:{src:t.icon}})]):n._e()])})),0),n._v(" "),n.totalLike>0?o("div",{staticClass:"text-[#65676B] text-[15px] hover:underline cursor-pointer"},[n._v("\n        "+n._s(n.totalLike)+"\n      ")]):n._e()]),n._v(" "),o("div",{staticClass:"flex items-center gap-4"},[o("div",{staticClass:"text-[#65676B] text-sm hover:underline cursor-pointer"},[n._v("\n        "+n._s(n.comments.length)+" "+n._s(n.$t("home.comment1"))+"\n      ")]),n._v(" "),o("div",{staticClass:"text-[#65676B] text-sm hover:underline cursor-pointer"},[n._v("\n        3 "+n._s(n.$t("home.share1"))+"\n      ")])])]),n._v(" "),o("div",{staticClass:"mx-3 border-t dark:border-[#65676B] :border-[#3E4042]"},[o("div",{staticClass:"relative grid grid-cols-3 items-center justify-between h-11"},[o("LikeButton",{attrs:{post:n.post},on:{addLike:n.addLike,Unlike:n.Unlike}}),n._v(" "),o("div",{staticClass:"text-[#65676B] text-[15px] font-semibold flex items-center gap-2 justify-center hover:bg-gray-200 py-2 rounded cursor-pointer"},[n._m(0),n._v(" "),o("div",[n._v(n._s(n.$t("home.comment")))])]),n._v(" "),o("div",{staticClass:"text-[#65676B] text-[15px] font-semibold flex items-center gap-2 justify-center hover:bg-gray-200 py-2 rounded cursor-pointer"},[n._m(1),n._v(" "),o("div",[n._v(n._s(n.$t("home.share")))])])],1)]),n._v(" "),o("div",{staticClass:"mb-2"},[n.showRecomment?n._e():o("div",{staticClass:"mx-4 text-[#65676B] text-[15px] font-medium cursor-pointer hover:underline dark:text-[#B0B3B8]",on:{click:function(t){n.showPostDetail=!0}}},[n._v("\n    "+n._s(n.$t("home.moreComment"))+"\n    ")]),n._v(" "),n._l(n.comments.slice(0,1),(function(t,e){return o("div",{key:e},[o("CommentDetail",{attrs:{comment:t},on:{showPostDetail:function(t){n.showPostDetail=!0}}})],1)})),n._v(" "),o("div",{staticClass:"p-4 pt-1"},[o("InputComment",{on:{addMess:n.addMess}})],1)],2)],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"font-semibold flex items-center justify-center"},[t("i",{staticClass:"x1b0d499 x1d69dk1",staticStyle:{"background-image":"url('https://static.xx.fbcdn.net/rsrc.php/v3/yZ/r/WoftRVRTwaO.png')","background-position":"-170px -62px","background-size":"190px 204px",width:"18px",height:"18px","background-repeat":"no-repeat",display:"inline-block",filter:"invert(40%)"},attrs:{"data-visualcompletion":"css-img"}})])},function(){var t=this._self._c;return t("div",{staticClass:"font-semibold flex items-center justify-center"},[t("i",{staticStyle:{"background-image":"url('https://static.xx.fbcdn.net/rsrc.php/v3/yZ/r/WoftRVRTwaO.png')","background-position":"-150px -132px","background-size":"190px 204px",width:"18px",height:"18px","background-repeat":"no-repeat",display:"inline-block",filter:"invert(40%)"}})])}],!1,null,"cf245536",null);e.default=component.exports;installComponents(component,{PostDetail:n(551).default})}}]);