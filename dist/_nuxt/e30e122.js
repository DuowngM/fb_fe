(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1009:function(e,t,n){"use strict";n.r(t);n(46);var r=[function(){var e=this._self._c;return e("div",{staticClass:"w-[15px] h-[15px]"},[e("img",{staticClass:"w-full h-full object-cover",attrs:{src:n(53),alt:""}})])},function(){var e=this._self._c;return e("div",{staticClass:"w-[15px] h-[15px]"},[e("img",{staticClass:"w-full h-full object-cover",attrs:{src:n(53),alt:""}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"ml-1"},[e._v("\n                      Bạn đã trả lời\n                      "),t("span",[e._v(" chính mình")])])},function(){var e=this._self._c;return e("div",{staticClass:"w-[15px] h-[15px]"},[e("img",{staticClass:"w-full h-full object-cover",attrs:{src:n(53),alt:""}})])},function(){var e=this._self._c;return e("div",{staticClass:"w-[15px] h-[15px]"},[e("img",{staticClass:"w-full h-full object-cover",attrs:{src:n(53),alt:""}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"ml-1"},[e._v("\n                      Bạn đã trả lời\n                      "),t("span",[e._v(" chính mình")])])}],l=n(30),o=n(11),c=(n(27),n(76),n(137),n(70),n(74),n(23),n(58),n(59),n(50)),d=n.n(c),m=n(22),v=n(16),h=n(6),x=n(213),f=n(320),_=n(321),w=n(323),C=n(324),y=m.a.get("messenger"),I={name:"MessengerOtherInbox",components:{Icon:x.default,Sticker:f.default,Gif:_.default,MessengerInboxTop:w.default,NoneMessengerList:C.default},props:{messengerOtherValue:{type:Object,default:null}},data:function(){return{icons:{messengerPlus:h.X,messengerPlusActive:h.Y,messengerMenu:h.T,messengerReact:h.Z,messengerReply:h.ab,messengerLikeActive:h.S,messengerLike:h.R,messengerIconActive:h.M,messengerIcon:h.L,messengerGifActive:h.K,messengerGif:h.J,messengerStickerActive:h.eb,messengerSticker:h.db,messengerImageActive:h.O,messengerImage:h.N,previewImgX:h.Bb},value:{inputData:void 0,previewImg:void 0,messageImg:void 0,messageSticker:void 0,replyMessageId:void 0,replyMessageContent:void 0,replyUser:void 0,gif:void 0,rows:1},toggle:{inboxOneFocus:!1,showIcons:!1,showStickers:!1,showGifs:!1,disableEnter:!1},messagesList:[],test:!0}},computed:{calculateRows:function(){return this.value.inputData||this.value.previewImg?2:1},user:function(){return this.$store.state.authModule.user}},watch:{messengerOtherValue:function(){this.handleRenderConversation()}},created:function(){var e=this;this.handleRenderConversation(),v.a.on("receive_messages",(function(){e.handleRenderConversation(),console.log("a3")}))},mounted:function(){var e=this;this.$refs.messengerInput.focus(),v.a.on("receive_messages",(function(){try{e.handleRenderConversation(),console.log("a3")}catch(e){console.log("error",e)}}))},methods:{handleRenderConversation:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.messengerOtherValue.conversationId){t.next=6;break}return t.next=4,y.renderByConversationId({accountHasLoginId:e.user.user_id,conversationId:e.messengerOtherValue.conversationId});case 4:n=t.sent,console.log("111111",n.data);case 6:e.messagesList=n.data,e.$nextTick(null==e?void 0:e.scrollToBottom),setTimeout((function(){e.$nextTick(null==e?void 0:e.scrollToBottom)}),5),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},scrollToBottom:function(){var e=this.$refs.chatHistory;e&&(e.scrollTop=null==e?void 0:e.scrollHeight)},handleSendMessenger:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("Giá trị input ====>",e.value.inputData),!e.value.inputData&&!e.value.messageImg){t.next=17;break}if(!e.messengerValueOne){t.next=17;break}return t.prev=3,t.next=6,y.sendMessage({messageContent:e.value.inputData.trim(),fromUserId:e.user.user_id,toUserId:e.messengerValueOne.toUserId,messageImg:e.value.messageImg,replyMessageId:e.value.replyMessageId,replyMessageContent:e.value.replyMessageContent});case 6:v.a.emit("send_message",e.messengerValueOne.toUserId),e.value.inputData=void 0,e.value.previewImg=void 0,e.value.messageImg=void 0,e.value.replyMessageId=void 0,e.value.replyMessageContent=void 0,e.handleRenderConversation(),t.next=17;break;case 15:t.prev=15,t.t0=t.catch(3);case 17:case"end":return t.stop()}}),t,null,[[3,15]])})))()},handleSendSticker:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.messengerValueOne){n.next=11;break}return n.prev=1,n.next=4,y.sendMessage({fromUserId:t.user.user_id,toUserId:t.messengerValueOne.toUserId,messageSticker:e});case 4:v.a.emit("send_message",t.messengerValueOne.toUserId),t.toggle.showStickers=!1,t.handleRenderConversation(),n.next=11;break;case 9:n.prev=9,n.t0=n.catch(1);case 11:if(!t.messengerValueTwo){n.next=22;break}return n.prev=12,n.next=15,y.sendMessage({fromUserId:t.user.user_id,toUserId:t.messengerValueTwo.toUserId,messageSticker:e});case 15:v.a.emit("send_message",t.messengerValueTwo.toUserId),t.toggle.showStickers=!1,t.handleRenderConversation(),n.next=22;break;case 20:n.prev=20,n.t1=n.catch(12);case 22:case"end":return n.stop()}}),n,null,[[1,9],[12,20]])})))()},handleSendGif:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.messengerValueOne){n.next=11;break}return n.prev=1,n.next=4,y.sendMessage({fromUserId:t.user.user_id,toUserId:t.messengerValueOne.toUserId,messageImg:e});case 4:v.a.emit("send_message",t.messengerValueOne.toUserId),t.toggle.showGifs=!1,t.handleRenderConversation(),n.next=11;break;case 9:n.prev=9,n.t0=n.catch(1);case 11:if(!t.messengerValueTwo){n.next=22;break}return n.prev=12,n.next=15,y.sendMessage({fromUserId:t.user.user_id,toUserId:t.messengerValueTwo.toUserId,messageImg:e});case 15:v.a.emit("send_message",t.messengerValueTwo.toUserId),t.toggle.showGifs=!1,t.handleRenderConversation(),n.next=22;break;case 20:n.prev=20,n.t1=n.catch(12);case 22:case"end":return n.stop()}}),n,null,[[1,9],[12,20]])})))()},setFocus:function(e){this.toggle.inboxOneFocus=e},handleFileUpload:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,m,v,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.toggle.disableEnter=!0,n=e.$refs.fileInput.files[0],((r=null==n?void 0:n.type).includes("image/")||"image/gif"===r)&&((o=new FileReader).onload=function(t){e.value.previewImg=t.target.result},o.readAsDataURL(n)),(c=new FormData).append("file",n),c.append("upload_preset","facebook"),t.prev=7,t.next=10,Promise.all([d.a.post("https://api.cloudinary.com/v1_1/dfftvwiej/image/upload",c)]);case 10:m=t.sent,v=Object(l.a)(m,1),h=v[0],e.value.messageImg=h.data.secure_url,e.toggle.disableEnter=!1,t.next=20;break;case 17:t.prev=17,t.t0=t.catch(7),console.error("Lỗi khi tải lên hình ảnh:",t.t0);case 20:case"end":return t.stop()}}),t,null,[[7,17]])})))()},handleRenderReply:function(e){console.log("rpl",e.userId),+e.userId===this.user.user_id&&(this.value.replyUser=" chính mình"),+e.userId!=+this.user.user_id&&(this.messengerValueOne?this.value.replyUser=this.messengerValueOne.toUserName:this.value.replyUser=this.messengerValueTwo.toUserName),this.value.replyMessageId=e.messageId,this.value.replyMessageContent=e.messageContent},handleCancelReply:function(){this.value.replyMessageId=void 0,this.value.replyMessageContent=void 0},handlePatchMessage:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.messengerValueOne){n.next=10;break}return n.prev=1,n.next=4,y.patchMessage(e);case 4:v.a.emit("send_message",t.messengerValueOne.toUserId),t.handleRenderConversation(),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(1);case 10:case"end":return n.stop()}}),n,null,[[1,8]])})))()},handleShowSticker:function(){this.toggle.showStickers=!this.toggle.showStickers,this.toggle.showIcons=!1,this.toggle.showGifs=!1},handleShowGif:function(){this.toggle.showGifs=!this.toggle.showGifs,this.toggle.showIcons=!1,this.toggle.showStickers=!1},handleShowIcons:function(){this.toggle.showIcons=!this.toggle.showIcons,this.toggle.showGifs=!1,this.toggle.showStickers=!1}}},k=(n(833),n(8)),component=Object(k.a)(I,(function(){var e,t,r,l=this,o=l._self._c;return o("div",{staticClass:"flex flex-col",attrs:{tabindex:"0"},on:{focusout:function(e){return l.setFocus(!1)},focusin:function(e){return l.setFocus(!0)}}},[o("messenger-inbox-top",{attrs:{"messenger-other-value":l.messengerOtherValue}}),l._v(" "),o("div",{staticClass:"flex h-[410px] flex-col justify-between"},[o("div",{ref:"chatHistory",staticClass:"flex flex-col justify-start min-h-[485px] w-full overflow-y-scroll mt-8",style:{"max-height":l.value.previewImg?"220px":l.value.replyMessageContent&&l.value.inputData?"268px":l.value.replyMessageContent?"288px":l.value.inputData?"310px":"347px"}},[o("none-messenger-list",{attrs:{"messenger-other-value":l.messengerOtherValue,"messages-list":l.messagesList}}),l._v(" "),l._l(l.messagesList.slice(0,(null===(e=l.messagesList)||void 0===e?void 0:e.length)-1),(function(e,t){var r,c;return o("div",{key:t},[(null===(r=l.messagesList)||void 0===r?void 0:r.length)>0?o("div",{staticClass:"flex justify-center items-center text-xs text-[#65676b] pl-4 pr-4 pt-4 pb-2 font-medium"},[o("div",[l._v(l._s(e.time))])]):l._e(),l._v(" "),(null===(c=l.messagesList)||void 0===c?void 0:c.length)>0?o("div",[o("div",l._l(e.messages,(function(t,r){var c,d,m,v,h,x,f;return o("div",{key:r},[t.userId==(null===(c=l.messengerOtherValue)||void 0===c?void 0:c.toUserId)&&t.userId!==l.user.user_id?o("div",{staticClass:"flex items-end mt-2 mb-2 cursor-pointer"},[o("div",{staticClass:"w-7 h-7 rounded-full overflow-hidden ml-2 mr-2",staticStyle:{border:"1px rgb(206, 206, 206) solid"}},[o("img",{staticClass:"w-full h-full",attrs:{src:null===(d=l.messengerOtherValue)||void 0===d?void 0:d.toUserAvatar,alt:""}})]),l._v(" "),o("div",{staticClass:"flex flex-col items-start"},[t.messageReplyContent&&l.messengerOtherValue?o("div",{staticClass:"flex items-center text-[12px] text-gray-500 ml-3 mt-2 mb-2"},[l._m(0,!0),l._v(" "),o("div",{staticClass:"ml-1"},[o("span",[l._v(l._s(null===(m=l.messengerOtherValue)||void 0===m?void 0:m.toUserName))]),l._v(" đã\n                      trả lời bạn\n                    ")])]):l._e(),l._v(" "),t.messageReplyContent?o("div",{staticClass:"rounded-xl bg-gray-100 p-2 text-[15px] text-gray-600 ml-2 max-h-[100px] overflow-hidden",staticStyle:{"box-shadow":"rgba(0, 0, 0, 0.16) 0px 1px 4px"},style:{width:(null===(v=t.messageReplyContent)||void 0===v?void 0:v.length)>26?"248px":"auto"},on:{click:l.handleToContent}},[o("div",{staticClass:"pl-1 pr-1"},[l._v("\n                      "+l._s(t.messageReplyContent)+"\n                    ")])]):l._e(),l._v(" "),t.messageContent?o("div",{staticClass:"normal-message text-[15px] flex items-center cursor-pointer"},[o("div",{staticClass:"pl-3 pr-3 pt-2 pb-2 rounded-[18px] bg-[#e4e6eb]",style:{width:(null===(h=t.messageContent)||void 0===h?void 0:h.length)>26?"185px":"auto"}},[l._v("\n                      "+l._s(t.messageContent)+"\n                    ")]),l._v(" "),o("div",{staticClass:"options cursor-pointer"},[o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{content:"Trả lời",theme:"material",placement:"top"},expression:"{\n                          content: 'Trả lời',\n                          theme: 'material',\n                          placement: 'top',\n                        }"}],staticClass:"message-icon w-[25px] h-[25px] overflow-hidden rounded-full p-1 ml-1",on:{click:function(e){return l.handleRenderReply(t)}}},[o("img",{staticClass:"w-full h-full object-cover",attrs:{src:n(53),alt:""}})]),l._v(" "),o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{content:"Gỡ, xóa",theme:"material",placement:"top"},expression:"{\n                          content: 'Gỡ, xóa',\n                          theme: 'material',\n                          placement: 'top',\n                        }"}],staticClass:"message-icon w-[25px] h-[25px] overflow-hidden rounded-full p-1",on:{click:function(n){return l.handlePatchMessage({action:"remove",sessionId:e.sessionId,messageId:t.messageId,accountHasLoginId:l.user.user_id})}}},[o("img",{staticClass:"w-full h-full object-cover",attrs:{src:n(104),alt:""}})])])]):l._e()]),l._v(" "),t.messageNote?o("div",{staticClass:"w-[210px] rounded-[18px] p-2 text-[15px] cursor-pointer",staticStyle:{border:"1px solid rgb(186, 186, 186)",color:"rgb(186, 186, 186)"}},[o("span",[l._v(" "+l._s(t.messageNote))])]):l._e(),l._v(" "),t.messageImg?o("div",{staticClass:"w-[60%] overflow-hidden p-2"},[o("img",{staticClass:"rounded-xl w-full object-cover",staticStyle:{border:"1px solid rgb(221, 221, 221)"},attrs:{src:t.messageImg,alt:""}})]):l._e(),l._v(" "),t.messageSticker?o("div",{staticClass:"w-[64px] overflow-hidden ml-2 flex items-end"},[o("img",{staticClass:"rounded-xl w-full object-cover",attrs:{src:t.messageSticker,alt:""}})]):l._e()]):l._e(),l._v(" "),t.userId==l.user.user_id?o("div",{staticClass:"flex items-end justify-end mt-2 mb-2 mr-2"},[o("div",{staticClass:"flex flex-col items-end"},[t.messageReplyContent&&l.messengerOtherValue?o("div",{staticClass:"flex items-center text-[12px] text-gray-500 mr-3 mt-2 mb-2"},[l._m(1,!0),l._v(" "),l._m(2,!0)]):l._e(),l._v(" "),t.messageReplyContent?o("div",{staticClass:"rounded-xl bg-gray-100 p-2 text-[15px] text-gray-600 mr-3 max-h-[100px] overflow-hidden",staticStyle:{"box-shadow":"rgba(0, 0, 0, 0.16) 0px 1px 4px"},style:{width:(null===(x=t.messageReplyContent)||void 0===x?void 0:x.length)>26?"248px":"auto"}},[o("div",{staticClass:"pl-1 pr-1"},[l._v("\n                      "+l._s(t.messageReplyContent)+"\n                    ")])]):l._e(),l._v(" "),t.messageContent?o("div",{staticClass:"normal-message text-[15px] flex items-center cursor-pointer"},[o("div",{staticClass:"options"},[o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{content:"Trả lời",theme:"material",placement:"top"},expression:"{\n                          content: 'Trả lời',\n                          theme: 'material',\n                          placement: 'top',\n                        }"}],staticClass:"message-icon w-[25px] h-[25px] overflow-hidden rounded-full p-1 ml-1 cursor-pointer",on:{click:function(e){return l.handleRenderReply(t)}}},[o("img",{staticClass:"w-full h-full object-cover",attrs:{src:n(53),alt:""}})]),l._v(" "),o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{content:"Thu hồi",theme:"material",placement:"top"},expression:"{\n                          content: 'Thu hồi',\n                          theme: 'material',\n                          placement: 'top',\n                        }"}],staticClass:"message-icon w-[25px] h-[25px] overflow-hidden rounded-full p-1",on:{click:function(n){return l.handlePatchMessage({action:"evicted",sessionId:e.sessionId,messageId:t.messageId,accountHasLoginId:l.user.user_id})}}},[o("img",{staticClass:"w-full h-full object-cover",attrs:{src:n(226),alt:""}})]),l._v(" "),o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{content:"Gỡ, xóa",theme:"material",placement:"top"},expression:"{\n                          content: 'Gỡ, xóa',\n                          theme: 'material',\n                          placement: 'top',\n                        }"}],staticClass:"message-icon w-[25px] h-[25px] overflow-hidden rounded-full p-1",on:{click:function(n){return l.handlePatchMessage({action:"remove",sessionId:e.sessionId,messageId:t.messageId,accountHasLoginId:l.user.user_id})}}},[o("img",{staticClass:"w-full h-full object-cover",attrs:{src:n(104),alt:""}})])]),l._v(" "),o("div",{staticClass:"rounded-[18px] bg-[#0084ff] p-2 text-[15px] text-white",style:{width:(null===(f=t.messageContent)||void 0===f?void 0:f.length)>26?"185px":"auto"}},[l._v("\n                      "+l._s(t.messageContent)+"\n                    ")])]):l._e()]),l._v(" "),t.messageNote?o("div",{staticClass:"w-[210px] rounded-[18px] p-2 text-[15px]",staticStyle:{border:"1px solid rgb(186, 186, 186)",color:"rgb(186, 186, 186)"}},[o("span",[l._v("\n                    "+l._s(t.messageNote)+"\n                  ")])]):l._e(),l._v(" "),t.messageImg?o("div",{staticClass:"w-[60%] overflow-hidden p-2 flex justify-end"},[o("img",{staticClass:"rounded-xl w-full object-cover",staticStyle:{border:"1px solid rgb(221, 221, 221)"},attrs:{src:t.messageImg,alt:""}})]):l._e(),l._v(" "),t.messageSticker?o("div",{staticClass:"w-[64px] overflow-hidden mr-2 flex justify-end"},[o("img",{staticClass:"rounded-xl w-full object-cover",attrs:{src:t.messageSticker,alt:""}})]):l._e()]):l._e()])})),0)]):l._e()])})),l._v(" "),l._l(l.messagesList.slice((null===(t=l.messagesList)||void 0===t?void 0:t.length)-1,null===(r=l.messagesList)||void 0===r?void 0:r.length),(function(e,t){var r,c,d,m;return o("div",{key:t},[(null===(r=l.messagesList)||void 0===r?void 0:r.length)>0?o("div",{staticClass:"flex justify-center items-center text-xs text-[#65676b] pl-4 pr-4 pt-4 pb-2 font-medium"},[o("div",[l._v(l._s(e.time))])]):l._e(),l._v(" "),(null===(c=l.messagesList)||void 0===c?void 0:c.length)>0?o("div",[o("div",l._l(e.messages,(function(t,r){var c,d,m,v,h,x,f;return o("div",{key:r},[t.userId==(null===(c=l.messengerValueOne)||void 0===c?void 0:c.toUserId)&&t.userId!==l.user.user_id?o("div",{staticClass:"flex items-end mt-2 mb-2 cursor-pointer"},[o("div",{staticClass:"w-7 h-7 rounded-full overflow-hidden ml-2 mr-2",staticStyle:{border:"1px rgb(206, 206, 206) solid"}},[o("img",{staticClass:"w-full h-full",attrs:{src:null===(d=l.messengerValueOne)||void 0===d?void 0:d.toUserAvatar,alt:""}})]),l._v(" "),o("div",{staticClass:"flex flex-col items-start"},[t.messageReplyContent&&l.messengerValueOne?o("div",{staticClass:"flex items-center text-[12px] text-gray-500 ml-3 mt-2 mb-2"},[l._m(3,!0),l._v(" "),o("div",{staticClass:"ml-1"},[o("span",[l._v(l._s(null===(m=l.messengerValueOne)||void 0===m?void 0:m.toUserName))]),l._v(" đã trả\n                      lời bạn\n                    ")])]):l._e(),l._v(" "),t.messageReplyContent?o("div",{staticClass:"rounded-xl bg-gray-100 p-2 text-[15px] text-gray-600 ml-2 max-h-[100px] overflow-hidden",staticStyle:{"box-shadow":"rgba(0, 0, 0, 0.16) 0px 1px 4px"},style:{width:(null===(v=t.messageReplyContent)||void 0===v?void 0:v.length)>26?"248px":"auto"}},[o("div",{staticClass:"pl-1 pr-1"},[l._v("\n                      "+l._s(t.messageReplyContent)+"\n                    ")])]):l._e(),l._v(" "),t.messageContent?o("div",{staticClass:"normal-message text-[15px] flex items-center cursor-pointer"},[o("div",{staticClass:"pl-3 pr-3 pt-2 pb-2 rounded-[18px] bg-[#e4e6eb]",style:{width:(null===(h=t.messageContent)||void 0===h?void 0:h.length)>26?"185px":"auto"}},[l._v("\n                      "+l._s(t.messageContent)+"\n                    ")]),l._v(" "),o("div",{staticClass:"options cursor-pointer"},[o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{content:"Trả lời",theme:"material",placement:"top"},expression:"{\n                          content: 'Trả lời',\n                          theme: 'material',\n                          placement: 'top',\n                        }"}],staticClass:"message-icon w-[25px] h-[25px] overflow-hidden rounded-full p-1 ml-1",on:{click:function(e){return l.handleRenderReply(t)}}},[o("img",{staticClass:"w-full h-full object-cover",attrs:{src:n(53),alt:""}})]),l._v(" "),o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{content:"Gỡ, xóa",theme:"material",placement:"top"},expression:"{\n                          content: 'Gỡ, xóa',\n                          theme: 'material',\n                          placement: 'top',\n                        }"}],staticClass:"message-icon w-[25px] h-[25px] overflow-hidden rounded-full p-1",on:{click:function(n){return l.handlePatchMessage({action:"remove",sessionId:e.sessionId,messageId:t.messageId,accountHasLoginId:l.user.user_id})}}},[o("img",{staticClass:"w-full h-full object-cover",attrs:{src:n(104),alt:""}})])])]):l._e()]),l._v(" "),t.messageNote?o("div",{staticClass:"w-[210px] rounded-[18px] p-2 text-[15px]",staticStyle:{border:"1px solid rgb(186, 186, 186)",color:"rgb(186, 186, 186)"}},[o("span",[l._v(" "+l._s(t.messageNote))])]):l._e(),l._v(" "),t.messageImg?o("div",{staticClass:"w-[60%] overflow-hidden p-2"},[o("img",{staticClass:"rounded-xl w-full object-cover",staticStyle:{border:"1px solid rgb(221, 221, 221)"},attrs:{src:t.messageImg,alt:""}})]):l._e(),l._v(" "),t.messageSticker?o("div",{staticClass:"w-[64px] overflow-hidden ml-2 flex items-end"},[o("img",{staticClass:"rounded-xl w-full object-cover",attrs:{src:t.messageSticker,alt:""}})]):l._e()]):l._e(),l._v(" "),t.userId==l.user.user_id?o("div",{staticClass:"flex items-end justify-end mt-2 mb-2 mr-2"},[o("div",{staticClass:"flex flex-col items-end"},[t.messageReplyContent&&l.messengerValueOne?o("div",{staticClass:"flex items-center text-[12px] text-gray-500 mr-3 mt-2 mb-2"},[l._m(4,!0),l._v(" "),l._m(5,!0)]):l._e(),l._v(" "),t.messageReplyContent?o("div",{staticClass:"rounded-xl bg-gray-100 p-2 text-[15px] text-gray-600 mr-3 max-h-[100px] overflow-hidden",staticStyle:{"box-shadow":"rgba(0, 0, 0, 0.16) 0px 1px 4px"},style:{width:(null===(x=t.messageReplyContent)||void 0===x?void 0:x.length)>26?"248px":"auto"}},[o("div",{staticClass:"pl-1 pr-1"},[l._v("\n                      "+l._s(t.messageReplyContent)+"\n                    ")])]):l._e(),l._v(" "),t.messageContent?o("div",{staticClass:"normal-message text-[15px] flex items-center cursor-pointer"},[o("div",{staticClass:"options"},[o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{content:"Trả lời",theme:"material",placement:"top"},expression:"{\n                          content: 'Trả lời',\n                          theme: 'material',\n                          placement: 'top',\n                        }"}],staticClass:"message-icon w-[25px] h-[25px] overflow-hidden rounded-full p-1 ml-1 cursor-pointer",on:{click:function(e){return l.handleRenderReply(t)}}},[o("img",{staticClass:"w-full h-full object-cover",attrs:{src:n(53),alt:""}})]),l._v(" "),o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{content:"Thu hồi",theme:"material",placement:"top"},expression:"{\n                          content: 'Thu hồi',\n                          theme: 'material',\n                          placement: 'top',\n                        }"}],staticClass:"message-icon w-[25px] h-[25px] overflow-hidden rounded-full p-1",on:{click:function(n){return l.handlePatchMessage({action:"evicted",sessionId:e.sessionId,messageId:t.messageId,accountHasLoginId:l.user.user_id})}}},[o("img",{staticClass:"w-full h-full object-cover",attrs:{src:n(226),alt:""}})]),l._v(" "),o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{content:"Gỡ, xóa",theme:"material",placement:"top"},expression:"{\n                          content: 'Gỡ, xóa',\n                          theme: 'material',\n                          placement: 'top',\n                        }"}],staticClass:"message-icon w-[25px] h-[25px] overflow-hidden rounded-full p-1",on:{click:function(n){return l.handlePatchMessage({action:"remove",sessionId:e.sessionId,messageId:t.messageId,accountHasLoginId:l.user.user_id})}}},[o("img",{staticClass:"w-full h-full object-cover",attrs:{src:n(104),alt:""}})])]),l._v(" "),o("div",{staticClass:"rounded-[18px] bg-[#0084ff] p-2 text-[15px] text-white",style:{width:(null===(f=t.messageContent)||void 0===f?void 0:f.length)>26?"185px":"auto"}},[l._v("\n                      "+l._s(t.messageContent)+"\n                    ")])]):l._e()]),l._v(" "),t.messageNote?o("div",{staticClass:"w-[210px] rounded-[18px] p-2 text-[15px]",staticStyle:{border:"1px solid rgb(186, 186, 186)",color:"rgb(186, 186, 186)"}},[o("span",[l._v("\n                    "+l._s(t.messageNote)+"\n                  ")])]):l._e(),l._v(" "),t.messageImg?o("div",{staticClass:"w-[60%] overflow-hidden p-2 flex justify-end"},[o("img",{staticClass:"rounded-xl w-full object-cover",staticStyle:{border:"1px solid rgb(221, 221, 221)"},attrs:{src:t.messageImg,alt:""}})]):l._e(),l._v(" "),t.messageSticker?o("div",{staticClass:"w-[64px] overflow-hidden mr-2 flex justify-end"},[o("img",{staticClass:"rounded-xl w-full object-cover",attrs:{src:t.messageSticker,alt:""}})]):l._e()]):l._e()])})),0)]):l._e(),l._v(" "),l.messengerOtherValue&&l.messengerOtherValue.unread>0?o("div",{staticClass:"flex justify-end items-center mr-2 text-xs text-[#65676b]"},[l._v("\n          Đã gửi\n        ")]):l._e(),l._v(" "),l.messengerOtherValue&&0==l.messengerOtherValue.unread?o("div",{staticClass:"flex justify-end items-center mr-2"},[o("span",{staticClass:"w-4 h-4 flex justify-end items-center rounded-full overflow-hidden"},[o("img",{staticClass:"w-full h-full object-cover",attrs:{src:null===(d=l.messengerOtherValue)||void 0===d?void 0:d.toUserAvatar,alt:""}})])]):l._e(),l._v(" "),l.messengerValueTwo&&0==l.messengerValueTwo.unread?o("div",{staticClass:"flex justify-end items-center mr-2"},[o("span",{staticClass:"w-4 h-4 flex justify-end items-center rounded-full overflow-hidden"},[o("img",{staticClass:"w-full h-full object-cover",attrs:{src:null===(m=l.messengerValueTwo)||void 0===m?void 0:m.toUserAvatar,alt:""}})])]):l._e()])}))],2),l._v(" "),l.value.replyMessageContent?o("div",{staticClass:"h-[58.46px] w-full pt-[10px] pl-[15px] pr-[15px] pb-[3px]",staticStyle:{"border-top":"1px rgb(186, 186, 186) solid"}},[o("div",{staticClass:"flex w-full justify-between items-center"},[o("div",{staticClass:"text-[12px]"},[l._v("\n          Đang trả lời\n          "),o("span",{staticClass:"font-medium"},[l._v(l._s(l.value.replyUser))])]),l._v(" "),o("div",{staticClass:"w-[25px] h-[25px] overflow-hidden bg-white hover:bg-slate-100 rounded-full flex items-center justify-center cursor-pointer",staticStyle:{"box-shadow":"rgba(0, 0, 0, 0.24) 0px 3px 8px"},on:{click:l.handleCancelReply}},[o("span",{domProps:{innerHTML:l._s(l.icons.previewImgX)}})])]),l._v(" "),o("div",{staticClass:"text-[12px] h-[36px] overflow-hidden text-gray-500"},[l._v("\n        "+l._s(l.value.replyMessageContent)+"\n      ")])]):l._e(),l._v(" "),o("div",{staticClass:"relative min-h-[60px] flex items-end pt-3 pb-3"},[o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{content:"Mở hành động khác",theme:"material",placement:"top"},expression:"{\n          content: 'Mở hành động khác',\n          theme: 'material',\n          placement: 'top',\n        }"}],staticClass:"flex items-center"},[o("div",{staticClass:"message-icon p-1 m-1 cursor-pointer",style:{display:l.toggle.inboxOneFocus?"block":"none"}},[o("span",{domProps:{innerHTML:l._s(l.icons.messengerPlusActive)}})]),l._v(" "),l.toggle.inboxOneFocus?l._e():o("div",{staticClass:"message-icon p-1 m-1 cursor-pointer"},[o("span",{domProps:{innerHTML:l._s(l.icons.messengerPlus)}})])]),l._v(" "),o("div",{staticClass:"flex items-end"},[o("div",{staticClass:"flex items-end",class:{"input-middle-icon":l.value.inputData||l.value.previewImg}},[o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{content:"Đính kèm ảnh",theme:"material",placement:"top"},expression:"{\n              content: 'Đính kèm ảnh',\n              theme: 'material',\n              placement: 'top',\n            }"}]},[o("label",{staticClass:"custom-file-upload"},[o("input",{ref:"fileInput",attrs:{type:"file",accept:"image/*,.gif"},on:{change:l.handleFileUpload}}),l._v(" "),o("div",{staticClass:"message-icon p-1 ml-1 mr-1 mb-1 cursor-pointer",style:{display:l.toggle.inboxOneFocus?"block":"none"}},[o("span",{domProps:{innerHTML:l._s(l.icons.messengerImageActive)}})])]),l._v(" "),l.toggle.inboxOneFocus?l._e():o("div",{staticClass:"message-icon p-1 ml-1 mr-1 mb-1 cursor-pointer"},[o("span",{domProps:{innerHTML:l._s(l.icons.messengerImage)}})])]),l._v(" "),o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{content:"Chọn nhãn dán",theme:"material",placement:"top"},expression:"{\n              content: 'Chọn nhãn dán',\n              theme: 'material',\n              placement: 'top',\n            }"}]},[o("div",{staticClass:"relative"},[o("div",{staticClass:"message-icon p-1 ml-1 mr-1 mb-1 cursor-pointer",style:{display:l.toggle.inboxOneFocus?"block":"none"},on:{click:function(e){return e.stopPropagation(),l.handleShowSticker.apply(null,arguments)}}},[o("span",{domProps:{innerHTML:l._s(l.icons.messengerStickerActive)}})]),l._v(" "),o("div",{staticClass:"iconButton cursor-pointer relative"},[l.toggle.showStickers?o("div",{staticClass:"absolute bottom-[47px] left-[23px] -translate-x-1/2 w-[265px] h-[346px] rounded-lg bg-white overflow-hidden pt-1",staticStyle:{"box-shadow":"rgba(0, 0, 0, 0.19) 0px 10px 20px"}},[o("sticker",{on:{"handle-send-sticker":l.handleSendSticker}})],1):l._e()])]),l._v(" "),l.toggle.inboxOneFocus?l._e():o("div",{staticClass:"message-icon p-1 ml-1 mr-1 mb-1 cursor-pointer"},[o("span",{domProps:{innerHTML:l._s(l.icons.messengerSticker)}})])]),l._v(" "),o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{content:"Chọn file gif",theme:"material",placement:"top"},expression:"{\n              content: 'Chọn file gif',\n              theme: 'material',\n              placement: 'top',\n            }"}]},[o("div",{staticClass:"relative"},[o("div",{staticClass:"message-icon p-1 ml-1 mr-1 mb-1 cursor-pointer",style:{display:l.toggle.inboxOneFocus?"block":"none"},on:{click:l.handleShowGif}},[o("span",{domProps:{innerHTML:l._s(l.icons.messengerGifActive)}})]),l._v(" "),o("div",{staticClass:"iconButton cursor-pointer relative"},[l.toggle.showGifs?o("div",{staticClass:"absolute bottom-[47px] left-[23px] -translate-x-1/2 w-[275px] h-[335px] rounded-lg bg-white overflow-hidden pt-1",staticStyle:{"box-shadow":"rgba(0, 0, 0, 0.19) 0px 10px 20px"}},[o("gif",{on:{"handle-send-gif":l.handleSendGif}})],1):l._e()])]),l._v(" "),l.toggle.inboxOneFocus?l._e():o("div",{staticClass:"message-icon p-1 ml-1 mr-1 mb-1 cursor-pointer"},[o("span",{domProps:{innerHTML:l._s(l.icons.messengerGif)}})])])]),l._v(" "),o("label",{staticClass:"min-h-[40px] pl-1 relative box-border flex flex-col justify-center cursor-default align-middle bg-[#f0f2f5]",staticStyle:{border:"1px solid rgb(233, 233, 233)"},style:{"border-radius":l.value.inputData||l.value.previewImg?"8px":"25px"}},[l.value.previewImg?o("div",{staticClass:"flex items-center justify-center p-3 relative"},[o("div",{staticClass:"overflow-hidden w-[85px] h-[85px] rounded-lg"},[o("img",{staticClass:"w-full h-full object-cover",attrs:{src:l.value.previewImg,alt:""}})]),l._v(" "),o("div",{staticClass:"absolute top-[5%] right-[28%] w-[25px] h-[25px] overflow-hidden bg-white hover:bg-slate-100 rounded-full flex items-center justify-center cursor-pointer",staticStyle:{"box-shadow":"rgba(0, 0, 0, 0.24) 0px 3px 8px"},on:{click:function(){return l.value.previewImg=void 0}}},[o("span",{domProps:{innerHTML:l._s(l.icons.previewImgX)}})])]):l._e(),l._v(" "),o("div",{staticClass:"flex items-end"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:l.value.inputData,expression:"value.inputData"}],ref:"messengerInput",staticClass:"outline-none text-[.9375rem] text-[#050505] placeholder:text-[#707276] bg-transparent overflow-x-hidden overflow-y-auto",staticStyle:{padding:"7px 8px 9px",resize:"none","line-height":"1.3333"},attrs:{tabindex:"2",rows:l.calculateRows,cols:l.calculateCols,placeholder:"Aa"},domProps:{value:l.value.inputData},on:{keyup:function(e){if(!e.type.indexOf("key")&&l._k(e.keyCode,"enter",13,e.key,"Enter"))return null;l.toggle.disableEnter||l.handleSendMessenger()},input:function(e){e.target.composing||l.$set(l.value,"inputData",e.target.value)}}}),l._v(" "),o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{content:"Chọn biểu tượng cảm xúc",theme:"material",placement:"top"},expression:"{\n                content: 'Chọn biểu tượng cảm xúc',\n                theme: 'material',\n                placement: 'top',\n              }"}]},[o("div",{staticClass:"relative"},[o("div",{staticClass:"message-icon p-1 mb-1 mr-1 cursor-pointer",style:{display:l.toggle.inboxOneFocus?"block":"none"},on:{click:function(e){return e.stopPropagation(),l.handleShowIcons.apply(null,arguments)}}},[o("span",{domProps:{innerHTML:l._s(l.icons.messengerIconActive)}})]),l._v(" "),o("div",{staticClass:"iconButton cursor-pointer relative"},[l.toggle.showIcons?o("div",{staticClass:"absolute bottom-[47px] left-[-140px] -translate-x-1/2 w-[324px] h-[264px] rounded-lg bg-white overflow-hidden pt-1",staticStyle:{"box-shadow":"rgba(0, 0, 0, 0.19) 0px 10px 20px"}},[o("Icon",{on:{"update:addIcon":l.addIcon}})],1):l._e()])]),l._v(" "),l.toggle.inboxOneFocus?l._e():o("div",{staticClass:"message-icon p-1 mb-1 mr-1 cursor-pointer"},[o("span",{domProps:{innerHTML:l._s(l.icons.messengerIcon)}})])])])])]),l._v(" "),o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{content:"Gửi lượt thích",theme:"material",placement:"top"},expression:"{\n          content: 'Gửi lượt thích',\n          theme: 'material',\n          placement: 'top',\n        }"}],staticClass:"message-icon absolute p-2 ml-1 mr-1 mt-1 mb-[3px] cursor-pointer right-0"},[o("div",{style:{display:l.toggle.inboxOneFocus?"block":"none"}},[o("span",{domProps:{innerHTML:l._s(l.icons.messengerLikeActive)}})]),l._v(" "),l.toggle.inboxOneFocus?l._e():o("div",[o("span",{domProps:{innerHTML:l._s(l.icons.messengerLike)}})])])])])],1)}),r,!1,null,"6aa32411",null);t.default=component.exports},762:function(e,t,n){var content=n(834);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(20).default)("60c5ebb5",content,!0,{sourceMap:!1})},833:function(e,t,n){"use strict";n(762)},834:function(e,t,n){var r=n(19)((function(i){return i[1]}));r.push([e.i,'.inbox-one[data-v-6aa32411]{opacity:0}.input-middle-icon[data-v-6aa32411]{display:none!important}.message-icon[data-v-6aa32411]:hover{background-color:rgba(227,229,235,.639);border-radius:100%;cursor:pointer}input[type=file][data-v-6aa32411]{display:none}.custom-file-upload[data-v-6aa32411]:before{content:""}.options[data-v-6aa32411]{display:none}.normal-message:hover .options[data-v-6aa32411]{align-items:center;display:flex}',""]),r.locals={},e.exports=r}}]);